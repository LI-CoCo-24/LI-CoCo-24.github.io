System.register("chunks:///_virtual/fruit_skin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KnifeSkinItem.ts"],(function(i){var t,e,r,n,l,a,o,u,s,p,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){l=i.cclegacy,a=i._decorator,o=i.Node,u=i.SpriteFrame,s=i.Sprite,p=i.Component},function(i){c=i.KnifeSkinItem}],execute:function(){var f,h,_,v,w,S,b,g,d,m,y,k,z,F,I,C,L,N,D,K,M,T,x;l._RF.push({},"c3483vtZfZFTIL5f2T5yIKi","fruit_skin",void 0);var P=a.ccclass,R=a.property;i("fruit_skin",(f=P("fruit_skin"),h=R({type:o,displayName:"水果节点"}),_=R({type:[c],displayName:"水果皮肤列表"}),v=R({type:u,displayName:"默认皮肤"}),w=R(o),S=R(o),b=R(o),g=R(o),d=R(o),m=R(o),y=R(o),f((F=t((z=function(i){function t(){for(var t,e=arguments.length,l=new Array(e),a=0;a<e;a++)l[a]=arguments[a];return t=i.call.apply(i,[this].concat(l))||this,r(t,"fruit_node",F,n(t)),r(t,"fruit_skins",I,n(t)),r(t,"defaultSprite",C,n(t)),r(t,"all_fruit",L,n(t)),t.all_fruit_swich=!1,t.validSkins=[],t.fruitSprite=null,r(t,"orange",N,n(t)),r(t,"apple",D,n(t)),r(t,"banana",K,n(t)),r(t,"pineapple",M,n(t)),r(t,"strawberry",T,n(t)),r(t,"waterwelon",x,n(t)),t}e(t,i);var l=t.prototype;return l.onLoad=function(){this.initSpriteComponent(),this.filterValidSkins(),this.Swich_fruit(null,"0")},l.initSpriteComponent=function(){this.fruit_node?(this.fruitSprite=this.fruit_node.getComponent(s),this.fruitSprite||(this.fruitSprite=this.fruit_node.addComponent(s),console.warn("⚠️ 自动添加了Sprite组件"))):console.error("❌ 未指定水果节点！")},l.filterValidSkins=function(){this.validSkins=this.fruit_skins.filter((function(i){var t=i&&i.previewSprite;return t||console.error("❌ 无效皮肤配置（缺少previewSprite）"),t})),console.log("✅ 有效皮肤数量："+this.validSkins.length+"（索引0-"+(this.validSkins.length-1)+"）")},l.Swich_fruit=function(i,t){console.log("=== 最终调试日志 ==="),console.log("手动配置索引（字符串）：",t);var e=t?parseInt(t,10):0;if(console.log("解析后数字索引：",e),0===this.validSkins.length)return this.fruitSprite.spriteFrame=this.defaultSprite||null,void console.error("❌ 无有效皮肤！");var r=Math.max(0,Math.min(e,this.validSkins.length-1));r!==e&&console.warn("⚠️ 索引"+e+"越界，修正为"+r);var n=this.validSkins[r];console.log("目标皮肤预览图：",n.previewSprite.name),this.fruitSprite&&n.previewSprite&&(this.fruitSprite.spriteFrame=null,this.fruitSprite.spriteFrame=n.previewSprite,console.log("✅ 切换成功！当前皮肤："+this.fruitSprite.spriteFrame.name))},l.Setting_fruitskin=function(){this.all_fruit_swich?(this.all_fruit.active=!1,this.all_fruit_swich=!1):(this.all_fruit.active=!0,this.all_fruit_swich=!0)},l.Setting_fruitskin_close=function(){this.all_fruit_swich?(this.all_fruit.active=!1,this.all_fruit_swich=!1):(this.all_fruit.active=!0,this.all_fruit_swich=!0)},l.Switch_spin_right=function(){this.orange.active=!1,this.apple.active=!1,this.banana.active=!1,this.pineapple.active=!1,this.strawberry.active=!0,this.waterwelon.active=!0},l.Switch_spin_left=function(){this.orange.active=!0,this.apple.active=!0,this.banana.active=!0,this.pineapple.active=!0,this.strawberry.active=!1,this.waterwelon.active=!1},t}(p)).prototype,"fruit_node",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(z.prototype,"fruit_skins",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(z.prototype,"defaultSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(z.prototype,"all_fruit",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"orange",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"apple",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(z.prototype,"banana",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(z.prototype,"pineapple",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(z.prototype,"strawberry",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(z.prototype,"waterwelon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=z))||k));l._RF.pop()}}}));

System.register("chunks:///_virtual/knife_spin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KnifeSkinItem.ts"],(function(i){var n,e,t,r,s,a,o,l,c,f;return{setters:[function(i){n=i.applyDecoratedDescriptor,e=i.inheritsLoose,t=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){s=i.cclegacy,a=i._decorator,o=i.Node,l=i.Prefab,c=i.Component},function(i){f=i.KnifeSkinItem}],execute:function(){var u,k,h,p,_,b,g,d,v,w,y,S,m,z,N,O,C,I,K,P,x;s._RF.push({},"f0126xaJpJKYba0rZKhzRvV","knife_spin",void 0);var D=a.ccclass,L=a.property;i("knife_spin",(u=D("knife_spin"),k=L(o),h=L(l),p=L({type:[f],displayName:"飞刀皮肤列表",tooltip:"每个元素包含prefab（皮肤预制体）和locked（是否锁定）"}),_=L(o),b=L(o),g=L(o),d=L(o),v=L(o),w=L(o),u((m=n((S=function(i){function n(){for(var n,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s))||this,t(n,"Skins_Node",m,r(n)),n.Skins_Open_switch=!1,t(n,"defaultknife",z,r(n)),t(n,"knife_skins",N,r(n)),n.currentknifeskin=0,n.onskinchange=null,t(n,"knife",O,r(n)),t(n,"knife_gold",C,r(n)),t(n,"knife_new",I,r(n)),t(n,"knife_purple",K,r(n)),t(n,"knife_red",P,r(n)),t(n,"knife_cyan",x,r(n)),n}e(n,i);var s=n.prototype;return s.onLoad=function(){},s.switch_skin=function(i,n){var e=parseInt(n);if(e=isNaN(e)?0:e,!this.knife_skins||0===this.knife_skins.length)return console.log("皮肤数组为空，使用默认皮肤"),void(this.onskinchange&&this.onskinchange(this.defaultknife));var t=Math.max(0,Math.min(e,this.knife_skins.length-1)),r=this.knife_skins[t]||{prefab:null,locked:!1};if(r.locked)return console.log("皮肤"+t+"已锁定，使用默认皮肤"),void(this.onskinchange&&this.onskinchange(this.defaultknife));this.currentknifeskin=t;var s=r.prefab||this.defaultknife;this.onskinchange&&this.onskinchange(s),console.log("成功切换到皮肤"+t)},s.registerSkinChangeCallback=function(i){this.onskinchange=i},s.getCurrentSkinPrefab=function(){var i=this.knife_skins[this.currentknifeskin];return(null==i?void 0:i.prefab)||this.defaultknife},s.Setting_open=function(){this.Skins_Open_switch?(this.Skins_Node.active=!1,this.Skins_Open_switch=!1):(this.Skins_Node.active=!0,this.Skins_Open_switch=!0)},s.Setting_close=function(){this.Skins_Open_switch?(this.Skins_Node.active=!1,this.Skins_Open_switch=!1):(this.Skins_Node.active=!0,this.Skins_Open_switch=!0)},s.Switch_spin_right=function(){this.knife.active=!1,this.knife_gold.active=!1,this.knife_new.active=!1,this.knife_purple.active=!1,this.knife_cyan.active=!0,this.knife_red.active=!0},s.Switch_spin_left=function(){this.knife.active=!0,this.knife_gold.active=!0,this.knife_new.active=!0,this.knife_purple.active=!0,this.knife_cyan.active=!1,this.knife_red.active=!1},n}(c)).prototype,"Skins_Node",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(S.prototype,"defaultknife",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(S.prototype,"knife_skins",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[new f]}}),O=n(S.prototype,"knife",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(S.prototype,"knife_gold",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(S.prototype,"knife_new",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(S.prototype,"knife_purple",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(S.prototype,"knife_red",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(S.prototype,"knife_cyan",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=S))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/KnifeSkinItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,n,o,l;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e._decorator,o=e.Prefab,l=e.SpriteFrame}],execute:function(){var a,p,u,c,s,f,b,m,y;r._RF.push({},"e2ed4dYXRJFkKmQ6xtuOj6p","KnifeSkinItem",void 0);var d=n.ccclass,h=n.property;e("KnifeSkinItem",(a=d("KnifeSkinItem"),p=h({type:o,displayName:"刀皮肤预制体",tooltip:"切换皮肤时使用的刀预制体"}),u=h({type:l,displayName:"皮肤预览图",tooltip:"皮肤切换按钮/列表中显示的预览图"}),c=h({displayName:"是否锁定",tooltip:"勾选=锁定（不可使用），取消=解锁（可使用）"}),a((b=i((f=function(){t(this,"prefab",b,this),t(this,"previewSprite",m,this),t(this,"locked",y,this)}).prototype,"prefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(f.prototype,"previewSprite",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(f.prototype,"locked",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=f))||s));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./KnifeSkinItem.ts","./Setting.ts","./fruit_skin.ts","./knife_spin.ts","./move.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./knife_spin.ts"],(function(e){var t,i,n,r,s,o,a,l,h,u,_,f,c,p,g,d,m,b,v,k,y,C,S,w,P,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,a=e.Node,l=e.Label,h=e.AudioClip,u=e.Vec3,_=e.Prefab,f=e.input,c=e.Input,p=e.instantiate,g=e.Collider2D,d=e.Contact2DType,m=e.tween,b=e.Animation,v=e.AudioSource,k=e.Color,y=e.UIOpacity,C=e.Button,S=e.math,w=e.ProgressBar,P=e.Component},function(e){T=e.knife_spin}],execute:function(){var M,K,z,N,A,D,R,E,I,x,O,U,L,B,G,j,H,V,W,F,Y,q,J,Q,X,Z,$,ee,te,ie,ne,re,se,oe,ae,le,he,ue,_e,fe,ce,pe,ge,de,me,be,ve,ke,ye,Ce,Se,we,Pe,Te,Me,Ke,ze,Ne,Ae,De,Re,Ee,Ie,xe,Oe,Ue,Le,Be,Ge,je,He;s._RF.push({},"30c8b+44Y9NdY/0q2k/2hKA","move",void 0);var Ve=o.ccclass,We=o.property;e("move",(M=Ve("move"),K=We(a),z=We(a),N=We(a),A=We(a),D=We(a),R=We(l),E=We(l),I=We(a),x=We(l),O=We(l),U=We(a),L=We(a),B=We(a),G=We(h),j=We(h),H=We(u),V=We(l),W=We(a),F=We(a),Y=We(a),q=We(a),J=We(a),Q=We(l),X=We(a),Z=We(a),$=We(l),ee=We(a),te=We(a),ie=We(a),ne=We(a),re=We(l),se=We(T),oe=We(_),ae=We(l),M((ue=t((he=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,n(t,"orange",ue,r(t)),n(t,"knife_Node_Top",_e,r(t)),n(t,"win",fe,r(t)),n(t,"lose",ce,r(t)),n(t,"agein_button",pe,r(t)),n(t,"label",ge,r(t)),n(t,"level_label",de,r(t)),n(t,"back",me,r(t)),n(t,"all_knife_label",be,r(t)),n(t,"now_knife_label",ve,r(t)),n(t,"button",ke,r(t)),n(t,"cover",ye,r(t)),n(t,"start_label",Ce,r(t)),n(t,"win_music",Se,r(t)),n(t,"lose_music",we,r(t)),n(t,"knife_Vec",Pe,r(t)),n(t,"time_label",Te,r(t)),n(t,"time_node",Me,r(t)),n(t,"Return_button",Ke,r(t)),n(t,"Camera",ze,r(t)),n(t,"level_up_button",Ne,r(t)),n(t,"Prop_time_button",Ae,r(t)),n(t,"Prop_time_button_label",De,r(t)),n(t,"Pro_time_timeup",Re,r(t)),n(t,"Prop_knife_lower_button",Ee,r(t)),n(t,"prop_knife_lower_label",Ie,r(t)),n(t,"Sound_button",xe,r(t)),n(t,"Sound_button_label",Oe,r(t)),n(t,"Setting_node",Ue,r(t)),n(t,"Progress_node",Le,r(t)),n(t,"Progress_label",Be,r(t)),n(t,"Knife_Skins",Ge,r(t)),n(t,"defaultknifeskin",je,r(t)),t.knife_Node=null,t.angel=0,t.Move=!0,t.all_knife=8,t.now_knife=0,t.UP_knife=!0,t.move_speed=100,t.level_speed=0,t.knife_judge=null,t.limit_time=60,t.remain_time=0,t.keep_time=!1,t.keep_knife=!1,t.random=[0,1],t.angel_direction=!0,t.leved=1,t.Sound_contorl=!0,t.Camera_shake_switch=!0,t.All_bgm_switch=!0,t.Gamepause=!1,t.preKnifeCount=0,t.preKnives=[],t.LevelCount=0,t.difficultyConfig={level1:{level:1,speed:75,time:60,preKnife:0,string:"一",Bar:0},level2:{level:2,speed:100,time:45,preKnife:1,string:"二",Bar:.25},level3:{level:3,speed:100,time:45,preKnife:2,string:"三",Bar:.5},levelMax:{level:4,speed:150,time:30,preKnife:3,string:"四",Bar:.75}},t.isInfiniteMode=!1,t.currentStage=1,t.stageTargetKnife=8,t.stageKnifeIncrement=2,t.score=0,n(t,"scoreLabel",He,r(t)),t.infiniteDifficultyModes=["fixed","variable","reverse"],t.currentDifficultyMode="fixed",t.infinitePreKnifeMin=2,t.infinitePreKnifeMax=4,t.targetSpeed=0,t.currentSpeed=0,t.speedStep=2,t.acceleratePhase=!0,t.maxSpeed=350,t.minSpeed=0,t}i(t,e);var s=t.prototype;return s.onLoad=function(){var e=this;this.updateDifficulty(),f.on(c.EventType.TOUCH_START,this.start_game,this),f.on(c.EventType.TOUCH_START,this.knife_fight,this),this.targetSpeed=this.move_speed,this.currentSpeed=this.targetSpeed,this.remain_time=this.limit_time,this.Knife_Skins&&this.Knife_Skins.registerSkinChangeCallback((function(){e.knife_judge&&e.knife_judge.isValid&&e.knife_judge.destroy(),e.knife_create()}))},s.onDestroy=function(){f.off(c.EventType.TOUCH_START,this.start_game,this),f.off(c.EventType.TOUCH_START,this.knife_fight,this)},s.formatTime=function(e){var t=Math.floor(e/60),i=Math.floor(e%60);return(t<10?"0"+t:""+t)+":"+(i<10?"0"+i:""+i)},s.knife_create=function(){if(!(this.now_knife>=this.all_knife)){var e=this.defaultknifeskin;if(this.Knife_Skins&&(e=this.Knife_Skins.getCurrentSkinPrefab()),e){var t=p(e);t.setParent(this.knife_Node_Top),t.setPosition(this.knife_Vec),t.getComponent(g).on(d.BEGIN_CONTACT,this.onKnifeContact,this),this.knife_judge=t,this.keep_knife=!0}else console.error("没有可用的刀预制体，请检查配置！")}},s.knife_fight=function(){var e=this;this.keep_knife&&this.knife_judge&&this.keep_time&&(this.keep_knife=!1,m(this.knife_judge).to(.05,{position:new u(350,805,0)}).call((function(){e.orange_spin(e.knife_judge),e.knife_judge.getComponent(g).off(d.BEGIN_CONTACT,e.onKnifeContact,e),e.knife_judge=null,e.UP_num(),e.orange.getComponent(b).play("D4"),4==e.leved&&e.orange_random()})).start())},s.UP_num=function(){var e=this;this.UP_knife&&(this.now_knife++,this.now_knife_label.string="当前："+this.now_knife+"  把",this.score+=20,this.scoreLabel.string="积分："+this.score,this.keep_knife=!0,this.Audion_win(),this.isInfiniteMode?("reverse"===this.currentDifficultyMode&&(this.angel_direction=!this.angel_direction),this.now_knife>=this.stageTargetKnife?(this.score+=100,this.scoreLabel.string="积分："+this.score,this.orange&&(this.orange.children.forEach((function(e){(e.name.includes("knife")||e.name.startsWith("preKnife"))&&e.destroy()})),this.preKnives.forEach((function(e){return e.destroy()})),this.preKnives=[]),this.now_knife=0,this.keep_knife=!0,this.knife_judge=null,this.currentStage++,this.stageTargetKnife+=this.stageKnifeIncrement,this.all_knife=this.stageTargetKnife,this.currentDifficultyMode=this.infiniteDifficultyModes[Math.floor(Math.random()*this.infiniteDifficultyModes.length)],this.preKnifeCount=Math.floor(Math.random()*(this.infinitePreKnifeMax-this.infinitePreKnifeMin+1))+this.infinitePreKnifeMin,this.preSpawnRandomKnives(),this.label&&(this.label.string="第"+this.currentStage+"阶段（"+this.getDifficultyModeText()+"）！目标"+this.stageTargetKnife+"把刀"),this.all_knife_label&&(this.all_knife_label.string="目标：射入"+this.stageTargetKnife+"把剑"),this.now_knife_label&&(this.now_knife_label.string="当前：0 把"),this.Move=!1,setTimeout((function(){e.Move=!0,e.label.string=""}),1e3),this.knife_create()):this.knife_create()):this.now_knife==this.all_knife?this.end(!0):this.knife_create())},s.BEGIN_CONTA=function(){this.UP_knife=!1,this.end(!1)},s.Audion_win=function(){if(this.Sound_contorl){var e=this.node.getComponent(v);e.clip=this.win_music,e.play()}},s.Audion_lose=function(){if(this.Sound_contorl){var e=this.node.getComponent(v);e.clip=this.lose_music,e.play()}},s.end=function(e){this.isInfiniteMode?e||(this.Move=!1,this.keep_knife=!1,this.Camera_shake(70),this.Audion_lose(),this.win.active=!1,this.button.active=!0,this.level_up_button.active=!1,this.label&&(this.remain_time<=0?this.label.string="时间到！最终阶段："+this.currentStage+" 积分："+this.score:this.label.string="无限模式结束！最终阶段："+this.currentStage+" 积分："+this.score),this.back.active=!0,this.Return_button.active=!1,this.Sound_button.active=!1,this.Prop_time_button.active=!1,this.Prop_knife_lower_button.active=!1,this.Setting_node.active=!1,this.Progress_node.active=!1):(this.Move=!1,this.keep_knife=!1,e?(this.lose.active=!1,this.label&&(this.label.string="小菜一碟!"),this.level_up_button.active=!0,this.agein_button.active=!1,this.leved>=1&&this.level_label&&(this.level_label.string="你太棒了!下一关！")):(this.Camera_shake(70),this.Audion_lose(),this.win.active=!1,this.button.active=!0,this.level_up_button.active=!1,this.label&&(this.label.string="  菜！再试一次！",this.remain_time<=0&&(this.label.string="时间到！再来一次！"))),this.back.active=!0,this.Return_button.active=!1,this.Sound_button.active=!1,this.Prop_time_button.active=!1,this.Prop_knife_lower_button.active=!1,this.Setting_node.active=!1,this.Progress_node.active=!1)},s.Camera_shake=function(e){if(!this.Camera_shake_switch){var t=this.Camera.position.clone();m(this.Camera).repeat(3,m().to(.05,{position:new u(t.x+(Math.random()-.5)*e*2,t.y+(Math.random()-.5)*e*2,t.z)}).to(.05,{position:t})).start()}},s.Camera_shake_up_off=function(){this.Camera_shake_switch=!this.Camera_shake_switch},s.orange_spin=function(e){var t=this;if(e&&e.isValid&&this.orange){var i=e.getWorldPosition();e.setParent(this.orange),e.setWorldPosition(i),setTimeout((function(){t.tail_end(e)}),300);var n=-(e.angle+180);this.orange.angle<=90?e.angle=n-this.orange.angle:this.orange.angle<=180?e.angle=-this.orange.angle+n:this.orange.angle<=270?e.angle=-(this.orange.angle-180+n):this.orange.angle>270&&(e.angle=180-n-this.orange.angle)}},s.tail_end=function(e){if(e&&e.isValid){var t=e.getChildByName("motionstreak"),i=t.getWorldPosition();t.setParent(this.knife_Node_Top),t.setWorldPosition(i)}},s.New_game=function(){this.Move=!0,this.UP_knife=!0,this.keep_time=!1,this.keep_knife=!1,this.angel_direction=!0,this.angel=0,this.now_knife=0,this.remain_time=this.limit_time,this.knife_judge=null,this.preKnives.forEach((function(e){return e.destroy()})),this.preKnives=[],this.destroyChild_name(this.orange,"knife"),this.destroyChild_name(this.orange,"knife_gold"),this.destroyChild_name(this.orange,"knife_new"),this.destroyChild_name(this.orange,"knife_cyan"),this.destroyChild_name(this.orange,"knife_red"),this.destroyChild_name(this.orange,"knife_purple"),this.destroyChild_name(this.knife_Node_Top,"motionstreak"),this.destroyChild_name(this.knife_Node_Top,"knife"),this.destroyChild_name(this.knife_Node_Top,"knife_gold"),this.destroyChild_name(this.knife_Node_Top,"knife_new"),this.destroyChild_name(this.knife_Node_Top,"knife_cyan"),this.destroyChild_name(this.knife_Node_Top,"knife_red"),this.destroyChild_name(this.knife_Node_Top,"knife_purple"),this.win.active=!0,this.lose.active=!0,this.back.active=!1,this.time_node.active=!1,this.Return_button.active=!1,this.start_label.active=!0,this.level_up_button.active=!1,this.Prop_time_button.active=!1,this.Prop_knife_lower_button.active=!1,this.Sound_button.active=!1,this.label.string="",this.all_knife_label.string="",this.now_knife_label.string="",this.time_label.string="",this.Setting_node.active=!1,this.Progress_node.active=!1,this.scoreLabel.color=new k(235,255,0,0),this.orange.getComponent(b).stop(),this.orange.angle=0,f.off(c.EventType.TOUCH_START,this.start_game,this),f.off(c.EventType.TOUCH_START,this.knife_fight,this),f.on(c.EventType.TOUCH_START,this.start_game,this),f.on(c.EventType.TOUCH_START,this.knife_fight,this),this.cover.getComponent(y).opacity=255,this.orange.setPosition(-10,800),this.Prop_time_button.getComponent(C).interactable=!0,this.Prop_time_button_label.string=" ① ",this.Prop_knife_lower_button.getComponent(C).interactable=!0,this.prop_knife_lower_label.string=" ① "},s.start_game=function(){var e=this,t=this.orange.getComponent(b),i=this.cover.getComponent(b);t.play("D1"),i.play("D2"),this.start_label.active=!1,this.isInfiniteMode?this.initInfiniteMode():this.all_knife_label.string="目标：射入"+this.all_knife+"把剑",this.now_knife_label.string="当前："+this.now_knife+"  把",f.off(c.EventType.TOUCH_START,this.start_game,this),t.once(b.EventType.FINISHED,(function(){e.preSpawnRandomKnives(),e.knife_create(),e.keep_time=!0,e.time_node.active=!0,e.Prop_time_button.active=!0,e.Prop_knife_lower_button.active=!0,e.Sound_button.active=!0,e.Setting_node.active=!0,e.Progress_node.active=!0,e.Return_button.active=!0}),this)},s.start=function(){this.start_label.getComponent(b).play("D3")},s.All_bgm=function(){var e=this.cover.getComponent(v);this.All_bgm_switch?e.volume=0:e.volume=.2,this.All_bgm_switch=!this.All_bgm_switch},s.destroyChild_name=function(e,t){e&&e.children.slice().forEach((function(e){e.name===t&&e.destroy()}))},s.Ruturn_game=function(){this.destroyChild_name(this.orange,"knife"),this.destroyChild_name(this.orange,"knife_gold"),this.destroyChild_name(this.orange,"knife_red"),this.destroyChild_name(this.orange,"knife_cyan"),this.destroyChild_name(this.orange,"knife_new"),this.destroyChild_name(this.orange,"knife_purple"),this.destroyChild_name(this.knife_Node_Top,"motionstreak"),this.remain_time=this.limit_time,this.now_knife=0,this.now_knife_label.string="当前："+this.now_knife+"  把",this.Prop_time_button.getComponent(C).interactable=!0,this.Prop_time_button_label.string=" ① ",this.Prop_knife_lower_button.getComponent(C).interactable=!0,this.prop_knife_lower_label.string=" ① "},s.update=function(e){if(this.Move&&!this.Gamepause){if(this.angel>=360&&(this.angel=0),this.isInfiniteMode)if("variable"===this.currentDifficultyMode){var t=this.speedStep;if(this.acceleratePhase){var i=this.maxSpeed-this.targetSpeed;i<20&&(t=this.speedStep*(i/20),t=Math.max(.1,t)),this.targetSpeed+=2*t,i<5&&(this.targetSpeed=this.maxSpeed,this.acceleratePhase=!1)}else{var n=this.targetSpeed-this.minSpeed;n<20&&(t=this.speedStep*(n/20),t=Math.max(.5,t)),this.targetSpeed-=2*t,n<5&&(this.targetSpeed=this.minSpeed,this.acceleratePhase=!0,this.angel_direction=!this.angel_direction)}this.currentSpeed=S.lerp(this.currentSpeed,this.targetSpeed,.1),this.move_speed=this.currentSpeed}else"fixed"===this.currentDifficultyMode&&(this.move_speed=this.level_speed+10*this.currentStage);else if(2==this.leved){var r=this.speedStep;if(this.acceleratePhase){var s=this.maxSpeed-this.targetSpeed;s<20&&(r=this.speedStep*(s/20),r=Math.max(.1,r)),this.targetSpeed+=2*r,s<5&&(this.targetSpeed=this.maxSpeed,this.acceleratePhase=!1)}else{var o=this.targetSpeed-this.minSpeed;o<20&&(r=this.speedStep*(o/20),r=Math.max(.5,r)),this.targetSpeed-=2*r,o<5&&(this.targetSpeed=this.minSpeed,this.acceleratePhase=!0,this.angel_direction=!this.angel_direction)}this.currentSpeed=S.lerp(this.currentSpeed,this.targetSpeed,.1),this.move_speed=this.currentSpeed}else this.leved>=3&&(this.move_speed=this.level_speed+10*this.now_knife,this.targetSpeed=this.move_speed,this.currentSpeed=this.move_speed);this.angel_direction?this.angel+=e*this.move_speed:this.angel-=e*this.move_speed,this.orange&&(this.orange.angle=this.angel),this.keep_time&&this.remain_time>0&&(this.remain_time-=e),this.remain_time<=0&&(this.remain_time=0,this.BEGIN_CONTA()),this.time_label&&(this.time_label.string="时间:"+this.formatTime(this.remain_time)),this.isInfiniteMode&&(this.remain_time=this.limit_time,this.time_label.string="时间: ∞ ")}},s.leved_Up=function(){if(this.LevelCount++,this.LevelCount>=4)return this.isInfiniteMode=!0,this.initInfiniteMode(),void this.New_game();this.updateDifficulty(),this.New_game()},s.updateDifficulty=function(){var e;if(0===this.LevelCount?e=this.difficultyConfig.level1:1===this.LevelCount?(e=this.difficultyConfig.level2,this.targetSpeed=e.speed,this.currentSpeed=e.speed,this.acceleratePhase=!0,this.maxSpeed=350,this.minSpeed=0,e=this.difficultyConfig.level2):2===this.LevelCount?(e=this.difficultyConfig.level3,this.targetSpeed=e.speed,this.currentSpeed=e.speed,this.acceleratePhase=!0,e=this.difficultyConfig.level3):e=this.difficultyConfig.levelMax,this.move_speed=e.speed,this.level_speed=e.speed,this.limit_time=e.time,this.preKnifeCount=e.preKnife,this.Progress_node){var t=this.Progress_node.getComponent(w);t&&(this.isInfiniteMode?t.progress=1:t.progress=e.Bar)}this.Progress_label&&(this.isInfiniteMode?this.Progress_label.string="无限模式！":this.Progress_label.string="第"+e.string+"关"),this.leved=e.level},s.orange_random=function(){var e=this.Random();this.angel_direction=0===e},s.Random=function(){return this.random[Math.floor(Math.random()*this.random.length)]},s.Prop_time=function(){this.Prop_time_button.getComponent(C).interactable=!1,this.Prop_time_button_label.string=" 0 ",this.Pro_time_timeup.getComponent(b).play("D6"),this.remain_time>0&&(this.remain_time=this.remain_time+10,this.remain_time>=this.limit_time&&(this.remain_time=this.limit_time))},s.Prop_knife_destroy=function(){this.Prop_knife_lower_button.getComponent(C).interactable=!1,this.prop_knife_lower_label.string=" 0 ";var e=[];if(this.orange.children.forEach((function(t){t.name.includes("knife")&&e.push(t)})),0!==e.length){var t=[];if(e.length>=2){for(var i=[];i.length<2;){var n=Math.floor(Math.random()*e.length);-1===i.indexOf(n)&&i.push(n)}t=i.map((function(t){return e[t]}))}else t=e;t.forEach((function(e){e.destroy()}))}},s.Sound_control=function(){!0===this.Sound_button_label.active?(this.Sound_button_label.active=!1,this.Sound_contorl=!0):(this.Sound_button_label.active=!0,this.Sound_contorl=!1)},s.Setting_pause_button=function(){this.Gamepause=!this.Gamepause,this.Gamepause?this.pauseGame():this.ResumeGame()},s.pauseGame=function(){this.Move=!1,this.keep_time=!1,this.keep_knife=!1;this.orange.getComponent(b);f.off(c.EventType.TOUCH_START,this.knife_fight,this)},s.ResumeGame=function(){this.Move=!0,this.keep_time=!0,this.keep_knife=!0;var e=this.orange.getComponent(b);e&&e.resume(),f.on(c.EventType.TOUCH_START,this.knife_fight,this)},s.onKnifeContact=function(){this.BEGIN_CONTA()},s.preSpawnRandomKnives=function(){var e=this;this.preKnives.forEach((function(e){return e.destroy()})),this.preKnives=[];var t=[],i=this.defaultknifeskin;if(this.Knife_Skins&&(i=this.Knife_Skins.getCurrentSkinPrefab()),i)for(var n=function(){var n;do{n=Math.floor(360*Math.random())}while(t.some((function(e){return Math.abs(e-n)<30})));t.push(n),e.angel=n,e.orange&&(e.orange.angle=n);var s=p(i);s.name="preKnife_"+r,s.setParent(e.orange);var o=n*Math.PI/180,a=150*Math.cos(o),l=150*Math.sin(o);s.setPosition(a,l,0),s.angle=n;var h=s.getComponent(g);h&&h.on(d.BEGIN_CONTACT,e.onKnifeContact,e),e.preKnives.push(s);var u=s.getChildByName("motionstreak");u&&(u.active=!1)},r=0;r<this.preKnifeCount;r++)n()},s.initInfiniteMode=function(){var e=this;if(this.currentStage=1,this.stageTargetKnife=8,this.score=0,this.all_knife=this.stageTargetKnife,this.scoreLabel.color=new k(235,255,0,255),this.currentDifficultyMode=this.infiniteDifficultyModes[Math.floor(Math.random()*this.infiniteDifficultyModes.length)],this.preKnifeCount=Math.floor(Math.random()*(this.infinitePreKnifeMax-this.infinitePreKnifeMin+1))+this.infinitePreKnifeMin,this.all_knife_label.string="目标：射入"+this.stageTargetKnife+"把剑",this.scoreLabel.string="积分："+this.score,this.label.string="无限模式 - 第1阶段（"+this.getDifficultyModeText()+")",this.Progress_node){var t=this.Progress_node.getComponent(w);t&&(t.progress=1)}this.Progress_label&&(this.Progress_label.string="无限模式！"),setTimeout((function(){return e.label.string=""}),2e3)},s.getDifficultyModeText=function(){switch(this.currentDifficultyMode){case"fixed":return"固定速度";case"variable":return"变速模式";case"reverse":return"命中反转";default:return"普通模式"}},t}(P)).prototype,"orange",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(he.prototype,"knife_Node_Top",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(he.prototype,"win",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(he.prototype,"lose",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(he.prototype,"agein_button",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(he.prototype,"label",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(he.prototype,"level_label",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(he.prototype,"back",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(he.prototype,"all_knife_label",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(he.prototype,"now_knife_label",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(he.prototype,"button",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(he.prototype,"cover",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(he.prototype,"start_label",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(he.prototype,"win_music",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(he.prototype,"lose_music",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(he.prototype,"knife_Vec",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u(350,210,0)}}),Te=t(he.prototype,"time_label",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(he.prototype,"time_node",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=t(he.prototype,"Return_button",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(he.prototype,"Camera",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(he.prototype,"level_up_button",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(he.prototype,"Prop_time_button",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(he.prototype,"Prop_time_button_label",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(he.prototype,"Pro_time_timeup",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(he.prototype,"Prop_knife_lower_button",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(he.prototype,"prop_knife_lower_label",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(he.prototype,"Sound_button",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(he.prototype,"Sound_button_label",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(he.prototype,"Setting_node",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(he.prototype,"Progress_node",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(he.prototype,"Progress_label",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(he.prototype,"Knife_Skins",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=t(he.prototype,"defaultknifeskin",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(he.prototype,"scoreLabel",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=he))||le));s._RF.pop()}}}));

System.register("chunks:///_virtual/Setting.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,o,c,s,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,s=t.Node,a=t.Component}],execute:function(){var p,l,u,g,_;o._RF.push({},"fe1adsEAtRLY77DcpbU0nl1","Setting",void 0);var h=c.ccclass,S=c.property;t("Setting",(p=h("Setting"),l=S(s),p((_=e((g=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,n(e,"Setting_Node",_,r(e)),e.Setting_Open_switch=!1,e}return i(e,t),e.prototype.Setting_open=function(){this.Setting_Open_switch?(this.Setting_Node.active=!1,this.Setting_Open_switch=!1):(this.Setting_Node.active=!0,this.Setting_Open_switch=!0)},e}(a)).prototype,"Setting_Node",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=g))||u));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});